<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Simple Data Binding</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" />    
</head>
<body>
    <div class="container">
        <div class="row" style="margin-top: 3em;"> 
    		
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>    
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>       
    <script type="text/javascript">
    if (window.Promise) {
  		console.log('Promise found');
 
	  	var promise = new Promise(function(resolve, reject) {
	    	var request = new XMLHttpRequest();
	 
	    	request.open('GET', 'http://api.icndb.com/jokes/random');
		    request.onload = function() {
				if (request.status == 200) {
					resolve(request.response); // we got data here, so resolve the Promise
				} 
				else {
					reject(Error(request.statusText)); // status is not 200 OK, so reject
				}
	    	};
	 
		    request.onerror = function() {
		      reject(Error('Error fetching data.')); // error occurred, reject the  Promise
		    };
	 
	    	request.send(); //send the request
	  	});
	 
	  	console.log('Asynchronous request made.');
	 
	  	promise.then(function(data) {
	    	console.log('Got data! Promise fulfilled.');
	    	document.getElementsByTagName('body')[0].textContent = JSON.parse(data).value.joke;
	  	}, function(error) {
	    	console.log('Promise rejected.');
	    	console.log(error.message);
	  	});
	} 
	else {
  		console.log('Promise not available');
	}
    </script>

</body>
</html>
